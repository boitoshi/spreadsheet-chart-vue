<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
.ic-container {
    max-width: 900px; margin: 0 auto; padding: 20px;
    font-family: -apple-system, BlinkMacSystemFont,
        "Segoe UI", Roboto, sans-serif;
}
.ic-title {
    font-size: 20px; font-weight: 700;
    margin-bottom: 16px; color: #1a1a1a;
}
.ic-date-label {
    font-size: 13px; font-weight: 400;
    color: #94a3b8; margin-left: 8px;
}
.ic-view-tabs {
    display: flex; gap: 4px; margin-bottom: 16px;
    background: #f1f5f9; border-radius: 8px;
    padding: 4px;
}
.ic-view-tab {
    flex: 1; padding: 10px 16px; background: none;
    border: none; border-radius: 6px; cursor: pointer;
    font-size: 14px; font-weight: 500; color: #64748b;
    transition: all 0.2s;
}
.ic-view-tab:hover { color: #334155; }
.ic-view-tab.active {
    background: white; color: #2563eb;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.ic-stock-tabs, .ic-period-tabs {
    display: flex; gap: 8px; margin-bottom: 16px;
    flex-wrap: wrap;
}
.ic-stock-tab {
    padding: 8px 18px; background: #f8fafc;
    border: 1px solid #e2e8f0; border-radius: 20px;
    cursor: pointer; font-size: 13px; font-weight: 500;
    color: #475569; transition: all 0.2s;
}
.ic-stock-tab:hover {
    border-color: #2563eb; color: #2563eb;
}
.ic-stock-tab.active {
    background: #2563eb; border-color: #2563eb;
    color: white;
}
.ic-chart-wrapper {
    position: relative; height: 400px;
    background: white; padding: 16px;
    border-radius: 12px; border: 1px solid #e2e8f0;
}
.ic-info {
    margin-top: 16px; padding: 16px;
    background: #f8fafc; border-radius: 10px;
    display: grid;
    grid-template-columns:
        repeat(auto-fit, minmax(180px, 1fr));
    gap: 12px;
}
.ic-info-item {
    display: flex; flex-direction: column;
}
.ic-info-label {
    font-size: 11px; color: #94a3b8;
    margin-bottom: 4px; text-transform: uppercase;
    letter-spacing: 0.05em;
}
.ic-info-value {
    font-size: 18px; font-weight: 600;
    color: #1e293b;
}
.ic-info-value.positive { color: #16a34a; }
.ic-info-value.negative { color: #dc2626; }
@media (max-width: 600px) {
    .ic-container { padding: 12px; }
    .ic-title { font-size: 16px; margin-bottom: 12px; }
    .ic-chart-wrapper { height: 280px; padding: 10px; }
    .ic-stock-tab {
        padding: 6px 12px; font-size: 12px;
    }
    .ic-view-tab {
        padding: 8px 10px; font-size: 13px;
    }
    .ic-info {
        grid-template-columns: 1fr 1fr;
        gap: 8px; padding: 12px;
    }
    .ic-info-value { font-size: 15px; }
    .ic-info-label { font-size: 10px; }
}
@media (max-width: 380px) {
    .ic-info {
        grid-template-columns: 1fr;
    }
}
</style>
<div class="ic-container">
    <div class="ic-title">エヌビディア (NVDA)
        <span class="ic-date-label">2026年1月末時点</span>
    </div>
    
    <div class="ic-view-tabs" id="fxToggle">
        <button class="ic-view-tab active"
            data-fx="foreign">USD</button>
        <button class="ic-view-tab"
            data-fx="jpy">JPY</button>
    </div>
    <div class="ic-period-tabs" id="periodTabs">
        <button class="ic-stock-tab" data-period="1m">
            1M</button>
        <button class="ic-stock-tab active"
            data-period="6m">6M</button>
        <button class="ic-stock-tab" data-period="1y">
            1Y</button>
    </div>
    <div class="ic-chart-wrapper">
        <canvas id="icChart"></canvas>
    </div>
    <div class="ic-info" id="icInfo"></div>
</div>
<script>
(function() {
const S = {"symbol": "NVDA", "dates": ["2024-07-10", "2024-07-11", "2024-07-12", "2024-07-15", "2024-07-16", "2024-07-17", "2024-07-18", "2024-07-19", "2024-07-22", "2024-07-23", "2024-07-24", "2024-07-25", "2024-07-26", "2024-07-29", "2024-07-30", "2024-07-31", "2024-08-01", "2024-08-02", "2024-08-05", "2024-08-06", "2024-08-07", "2024-08-08", "2024-08-09", "2024-08-12", "2024-08-13", "2024-08-14", "2024-08-15", "2024-08-16", "2024-08-19", "2024-08-20", "2024-08-21", "2024-08-22", "2024-08-23", "2024-08-26", "2024-08-27", "2024-08-28", "2024-08-29", "2024-08-30", "2024-09-03", "2024-09-04", "2024-09-05", "2024-09-06", "2024-09-09", "2024-09-10", "2024-09-11", "2024-09-12", "2024-09-13", "2024-09-16", "2024-09-17", "2024-09-18", "2024-09-19", "2024-09-20", "2024-09-23", "2024-09-24", "2024-09-25", "2024-09-26", "2024-09-27", "2024-09-30", "2024-10-01", "2024-10-02", "2024-10-03", "2024-10-04", "2024-10-07", "2024-10-08", "2024-10-09", "2024-10-10", "2024-10-11", "2024-10-14", "2024-10-15", "2024-10-16", "2024-10-17", "2024-10-18", "2024-10-21", "2024-10-22", "2024-10-23", "2024-10-24", "2024-10-25", "2024-10-28", "2024-10-29", "2024-10-30", "2024-10-31", "2024-11-01", "2024-11-04", "2024-11-05", "2024-11-06", "2024-11-07", "2024-11-08", "2024-11-11", "2024-11-12", "2024-11-13", "2024-11-14", "2024-11-15", "2024-11-18", "2024-11-19", "2024-11-20", "2024-11-21", "2024-11-22", "2024-11-25", "2024-11-26", "2024-11-27", "2024-11-29", "2024-12-02", "2024-12-03", "2024-12-04", "2024-12-05", "2024-12-06", "2024-12-09", "2024-12-10", "2024-12-11", "2024-12-12", "2024-12-13", "2024-12-16", "2024-12-17", "2024-12-18", "2024-12-19", "2024-12-20", "2024-12-23", "2024-12-24", "2024-12-26", "2024-12-27", "2024-12-30", "2024-12-31", "2025-01-02", "2025-01-03", "2025-01-06", "2025-01-07", "2025-01-08", "2025-01-10", "2025-01-13", "2025-01-14", "2025-01-15", "2025-01-16", "2025-01-17", "2025-01-21", "2025-01-22", "2025-01-23", "2025-01-24", "2025-01-27", "2025-01-28", "2025-01-29", "2025-01-30", "2025-01-31", "2025-02-03", "2025-02-04", "2025-02-05", "2025-02-06", "2025-02-07", "2025-02-10", "2025-02-11", "2025-02-12", "2025-02-13", "2025-02-14", "2025-02-18", "2025-02-19", "2025-02-20", "2025-02-21", "2025-02-24", "2025-02-25", "2025-02-26", "2025-02-27", "2025-02-28", "2025-03-03", "2025-03-04", "2025-03-05", "2025-03-06", "2025-03-07", "2025-03-10", "2025-03-11", "2025-03-12", "2025-03-13", "2025-03-14", "2025-03-17", "2025-03-18", "2025-03-19", "2025-03-20", "2025-03-21", "2025-03-24", "2025-03-25", "2025-03-26", "2025-03-27", "2025-03-28", "2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-04", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-28", "2025-04-29", "2025-04-30", "2025-05-01", "2025-05-02", "2025-05-05", "2025-05-06", "2025-05-07", "2025-05-08", "2025-05-09", "2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-19", "2025-05-20", "2025-05-21", "2025-05-22", "2025-05-23", "2025-05-27", "2025-05-28", "2025-05-29", "2025-05-30", "2025-06-02", "2025-06-03", "2025-06-04", "2025-06-05", "2025-06-06", "2025-06-09", "2025-06-10", "2025-06-11", "2025-06-12", "2025-06-13", "2025-06-16", "2025-06-17", "2025-06-18", "2025-06-20", "2025-06-23", "2025-06-24", "2025-06-25", "2025-06-26", "2025-06-27", "2025-06-30", "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-21", "2025-07-22", "2025-07-23", "2025-07-24", "2025-07-25", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-11", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-25", "2025-08-26", "2025-08-27", "2025-08-28", "2025-08-29", "2025-09-02", "2025-09-03", "2025-09-04", "2025-09-05", "2025-09-08", "2025-09-09", "2025-09-10", "2025-09-11", "2025-09-12", "2025-09-15", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-22", "2025-09-23", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-29", "2025-09-30", "2025-10-01", "2025-10-02", "2025-10-03", "2025-10-06", "2025-10-07", "2025-10-08", "2025-10-09", "2025-10-10", "2025-10-13", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-03", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-26", "2025-12-29", "2025-12-30", "2025-12-31", "2026-01-02", "2026-01-05", "2026-01-06", "2026-01-07", "2026-01-08", "2026-01-09", "2026-01-12", "2026-01-13", "2026-01-14", "2026-01-15", "2026-01-16", "2026-01-20", "2026-01-21", "2026-01-22", "2026-01-23", "2026-01-26", "2026-01-27", "2026-01-28", "2026-01-29", "2026-01-30"], "closes": [134.85, 127.35, 129.18, 128.39, 126.31, 117.94, 121.04, 117.88, 123.49, 122.54, 114.2, 112.23, 113.01, 111.54, 103.69, 116.97, 109.16, 107.22, 100.41, 104.21, 98.87, 104.93, 104.71, 108.97, 116.09, 118.03, 122.81, 124.53, 129.94, 127.2, 128.45, 123.69, 129.31, 126.41, 128.25, 125.56, 117.54, 119.32, 107.95, 106.16, 107.16, 102.79, 106.42, 108.05, 116.86, 119.1, 119.06, 116.74, 115.55, 113.33, 117.83, 115.96, 116.22, 120.83, 123.47, 124.0, 121.36, 121.4, 116.96, 118.81, 122.81, 124.88, 127.68, 132.84, 132.6, 134.76, 134.75, 138.02, 131.55, 135.67, 136.88, 137.95, 143.66, 143.54, 139.51, 140.36, 141.49, 140.47, 141.2, 139.29, 132.71, 135.35, 136.0, 139.86, 145.56, 148.83, 147.58, 145.21, 148.24, 146.22, 146.71, 141.93, 140.1, 146.96, 145.84, 146.62, 141.9, 135.97, 136.87, 135.29, 138.2, 138.58, 140.21, 145.09, 145.02, 142.4, 138.77, 135.03, 139.27, 137.3, 134.21, 131.96, 130.35, 128.87, 130.64, 134.66, 139.63, 140.18, 139.89, 136.97, 137.45, 134.25, 138.27, 144.43, 149.39, 140.1, 140.07, 135.87, 133.19, 131.72, 136.2, 133.53, 137.67, 140.79, 147.03, 147.18, 142.58, 118.39, 128.95, 123.67, 124.62, 120.04, 116.63, 118.62, 124.8, 128.64, 129.8, 133.53, 132.76, 131.1, 135.25, 138.81, 139.36, 139.19, 140.07, 134.39, 130.24, 126.6, 131.24, 120.12, 124.89, 114.03, 115.96, 117.27, 110.54, 112.66, 106.95, 108.73, 115.72, 115.56, 121.65, 119.51, 115.41, 117.5, 118.51, 117.68, 121.39, 120.67, 113.74, 111.41, 109.65, 108.36, 110.13, 110.4, 101.78, 94.29, 97.62, 96.28, 114.31, 107.55, 110.91, 110.69, 112.18, 104.47, 101.47, 96.89, 98.87, 102.69, 106.41, 110.99, 108.71, 109.0, 108.9, 111.59, 114.48, 113.8, 113.52, 117.04, 117.35, 116.63, 122.98, 129.91, 135.32, 134.81, 135.38, 135.55, 134.36, 131.78, 132.81, 131.27, 135.48, 134.79, 139.16, 135.11, 137.36, 141.19, 141.89, 139.96, 141.69, 142.6, 143.93, 142.81, 144.98, 141.95, 144.67, 144.1, 145.46, 143.83, 144.15, 147.88, 154.29, 155.0, 157.73, 157.97, 153.28, 157.23, 159.32, 158.22, 159.98, 162.86, 164.08, 164.9, 164.05, 170.68, 171.35, 172.98, 172.39, 171.36, 167.01, 170.76, 173.72, 173.48, 176.73, 175.49, 179.25, 177.85, 173.7, 179.98, 178.24, 179.4, 180.75, 182.68, 182.04, 183.14, 181.57, 182.0, 180.43, 181.99, 175.62, 175.38, 174.96, 177.97, 179.79, 181.75, 181.58, 180.15, 174.16, 170.76, 170.6, 171.64, 167.0, 168.29, 170.74, 177.31, 177.16, 177.81, 177.74, 174.87, 170.28, 176.23, 176.66, 183.6, 178.42, 176.96, 177.68, 178.18, 181.84, 186.57, 187.23, 188.88, 187.61, 185.53, 185.03, 189.1, 192.56, 183.15, 188.31, 180.02, 179.82, 181.8, 183.21, 182.63, 181.15, 180.27, 182.15, 186.25, 191.48, 201.02, 207.03, 202.88, 202.48, 206.87, 198.68, 195.2, 188.07, 188.14, 199.04, 193.15, 193.79, 186.85, 190.16, 186.59, 181.35, 186.51, 180.63, 178.87, 182.54, 177.81, 180.25, 176.99, 179.91, 181.45, 179.58, 183.38, 182.41, 185.55, 184.97, 183.78, 180.93, 175.02, 176.29, 177.72, 170.94, 174.14, 180.99, 183.69, 189.21, 188.61, 190.53, 188.22, 187.54, 186.5, 188.85, 188.12, 187.24, 189.11, 185.04, 184.86, 184.94, 185.81, 183.14, 187.05, 186.23, 178.07, 183.32, 184.84, 187.67, 186.47, 188.52, 191.52, 192.51, 191.13], "highs": [135.04, 136.09, 131.86, 131.33, 128.98, 121.8, 122.35, 121.55, 124.02, 124.64, 119.9, 116.58, 116.15, 116.23, 111.94, 118.29, 120.11, 108.67, 103.37, 107.66, 108.75, 105.45, 106.55, 111.02, 116.18, 118.55, 123.19, 124.95, 129.94, 129.82, 129.29, 130.69, 129.54, 131.2, 129.14, 128.28, 124.38, 121.7, 116.16, 113.22, 109.6, 108.1, 106.5, 109.35, 117.14, 120.75, 119.92, 118.14, 118.76, 117.66, 119.62, 118.58, 116.95, 121.76, 124.9, 127.63, 123.99, 121.46, 122.4, 119.34, 124.32, 125.0, 130.6, 133.43, 134.47, 134.95, 135.73, 139.55, 138.52, 136.57, 140.84, 138.85, 143.66, 144.37, 142.38, 141.3, 144.08, 143.09, 142.21, 140.28, 137.56, 137.26, 138.91, 140.32, 146.44, 148.88, 149.72, 148.8, 149.6, 149.28, 148.95, 145.19, 141.5, 147.08, 147.51, 152.84, 147.11, 142.0, 139.25, 137.17, 139.3, 140.4, 140.49, 145.74, 146.5, 145.66, 139.91, 141.78, 140.13, 138.4, 139.56, 134.36, 131.55, 136.66, 133.99, 135.24, 139.75, 141.86, 140.81, 138.98, 140.23, 138.03, 138.84, 144.86, 152.12, 153.09, 143.91, 139.88, 133.45, 136.34, 136.41, 138.71, 138.46, 141.79, 147.75, 147.19, 148.93, 128.36, 128.96, 126.86, 124.97, 127.82, 118.54, 121.17, 124.97, 128.73, 130.33, 134.96, 134.44, 132.2, 136.46, 139.21, 143.4, 141.32, 140.62, 141.42, 138.55, 130.16, 133.69, 134.97, 125.06, 123.67, 119.28, 118.25, 115.32, 113.45, 111.82, 112.21, 116.74, 117.74, 121.86, 122.87, 119.0, 120.43, 120.18, 117.97, 122.2, 121.27, 118.82, 114.43, 112.85, 110.94, 110.18, 111.96, 105.61, 100.11, 101.73, 105.83, 115.08, 110.84, 111.53, 114.27, 113.6, 106.77, 104.45, 99.42, 99.79, 104.78, 106.52, 111.9, 110.35, 110.18, 108.9, 114.92, 115.38, 114.65, 114.72, 117.66, 118.66, 118.21, 122.98, 131.2, 135.42, 136.28, 136.33, 135.85, 134.56, 137.38, 134.23, 132.66, 135.64, 137.23, 143.46, 139.59, 138.09, 141.97, 142.36, 143.97, 143.24, 144.97, 144.26, 144.97, 144.98, 143.56, 146.16, 145.2, 145.63, 146.18, 144.76, 147.94, 154.43, 156.7, 158.69, 158.64, 157.18, 157.58, 160.96, 159.29, 160.2, 164.4, 164.48, 167.87, 165.47, 172.38, 171.73, 174.14, 174.23, 173.36, 171.37, 171.24, 173.81, 174.7, 176.98, 179.36, 179.87, 183.28, 176.52, 180.18, 180.24, 179.88, 183.86, 183.28, 183.82, 184.46, 183.95, 183.0, 181.88, 182.92, 182.48, 175.98, 176.88, 178.57, 181.89, 182.37, 182.47, 184.45, 178.13, 172.36, 172.39, 171.84, 169.01, 170.94, 170.96, 179.27, 180.27, 178.59, 178.84, 177.49, 173.19, 177.09, 178.07, 184.54, 182.41, 179.77, 180.25, 179.76, 183.99, 187.34, 188.13, 191.04, 190.35, 187.22, 189.05, 189.59, 195.29, 195.61, 190.1, 184.79, 184.86, 183.27, 184.09, 185.19, 182.78, 183.43, 183.02, 187.46, 191.99, 203.14, 212.18, 206.15, 207.96, 211.33, 203.96, 202.91, 197.61, 188.31, 199.93, 195.41, 195.88, 191.43, 191.0, 188.99, 184.79, 187.85, 195.99, 184.55, 183.49, 178.15, 182.9, 179.28, 180.29, 185.65, 182.44, 184.52, 184.66, 188.0, 185.72, 185.48, 181.32, 182.82, 178.42, 178.49, 176.13, 176.15, 181.45, 184.16, 189.33, 188.91, 192.69, 188.76, 188.99, 190.56, 192.93, 193.63, 192.17, 191.37, 189.55, 186.34, 187.12, 188.11, 184.46, 189.7, 190.44, 182.38, 185.38, 186.17, 189.6, 189.12, 190.0, 192.35, 193.48, 194.49], "lows": [132.36, 127.0, 127.17, 127.13, 124.53, 116.67, 116.51, 117.32, 119.81, 122.05, 113.39, 106.25, 111.53, 111.25, 102.5, 110.83, 106.76, 101.33, 90.65, 100.51, 98.65, 97.48, 103.39, 106.21, 111.53, 114.02, 117.42, 121.13, 123.37, 125.84, 126.61, 123.05, 125.17, 124.32, 123.83, 122.59, 116.66, 117.17, 107.24, 104.08, 104.72, 100.91, 103.65, 104.91, 107.37, 115.34, 117.56, 114.32, 114.79, 113.18, 117.21, 115.35, 114.82, 115.34, 121.57, 121.76, 119.22, 118.11, 115.75, 115.1, 120.3, 121.79, 124.91, 129.38, 131.34, 130.96, 133.61, 136.25, 128.7, 131.53, 136.82, 137.23, 137.95, 141.73, 137.41, 138.41, 140.75, 140.0, 138.85, 136.76, 132.06, 134.52, 135.52, 137.28, 141.91, 146.12, 146.21, 143.52, 145.96, 145.85, 145.5, 140.03, 137.1, 140.94, 142.68, 140.65, 141.05, 135.77, 135.62, 131.75, 136.0, 137.77, 137.9, 140.24, 143.91, 141.27, 137.09, 133.75, 135.17, 135.76, 132.5, 130.38, 126.83, 128.24, 129.51, 128.18, 135.08, 138.61, 137.69, 134.67, 133.98, 133.79, 134.59, 139.69, 147.78, 139.97, 137.52, 134.18, 129.47, 130.01, 131.25, 133.45, 135.42, 137.05, 143.63, 143.68, 141.84, 116.67, 116.22, 120.02, 118.07, 119.16, 112.98, 116.67, 120.73, 125.18, 124.97, 129.92, 130.98, 129.04, 131.13, 135.46, 137.89, 137.18, 136.75, 133.99, 130.04, 124.41, 128.45, 119.98, 116.37, 112.25, 110.08, 114.48, 110.19, 107.53, 105.43, 104.74, 112.86, 113.77, 118.13, 118.01, 114.52, 115.66, 116.45, 115.4, 119.32, 118.9, 112.69, 110.64, 109.05, 103.63, 106.45, 106.77, 101.58, 92.09, 86.6, 94.44, 97.51, 99.13, 107.46, 109.05, 110.48, 100.43, 100.03, 95.02, 97.26, 102.0, 103.09, 105.71, 106.0, 107.42, 104.06, 111.28, 113.35, 112.64, 110.8, 112.26, 115.83, 115.19, 120.26, 124.45, 131.66, 132.64, 133.44, 132.37, 132.6, 130.57, 131.53, 129.14, 133.29, 134.77, 137.88, 132.9, 135.38, 137.92, 139.51, 138.8, 141.48, 141.91, 141.5, 141.85, 141.83, 140.83, 143.18, 143.76, 143.1, 142.63, 142.01, 145.48, 149.24, 153.98, 155.24, 155.94, 151.47, 152.95, 157.75, 157.32, 158.37, 161.14, 161.59, 163.45, 162.0, 169.18, 168.88, 170.81, 171.24, 170.98, 164.56, 167.95, 171.28, 172.94, 173.95, 175.0, 176.02, 175.91, 170.87, 174.5, 175.88, 176.23, 178.78, 180.38, 180.23, 179.44, 179.33, 179.44, 178.02, 180.57, 175.47, 168.78, 173.79, 171.18, 176.55, 178.79, 179.08, 176.39, 173.13, 167.2, 168.86, 169.39, 164.05, 167.33, 166.72, 175.45, 176.47, 176.44, 174.5, 174.37, 168.4, 172.95, 175.17, 174.7, 176.2, 175.39, 173.12, 174.92, 180.31, 181.47, 183.89, 188.05, 185.37, 183.32, 183.99, 186.53, 191.05, 182.04, 185.95, 179.69, 177.28, 179.76, 179.74, 181.72, 179.79, 176.75, 179.78, 183.49, 188.42, 191.9, 204.77, 201.4, 202.06, 205.55, 197.92, 194.64, 186.37, 178.9, 193.78, 191.29, 191.12, 183.84, 180.57, 184.31, 179.64, 182.82, 179.84, 172.92, 176.47, 169.54, 178.23, 176.49, 173.67, 179.99, 179.1, 179.96, 180.91, 182.4, 183.32, 182.04, 176.62, 174.62, 175.03, 174.9, 170.31, 171.82, 176.34, 182.35, 182.9, 186.59, 188.0, 185.91, 186.93, 186.49, 188.26, 186.15, 186.82, 186.56, 183.71, 183.67, 183.02, 183.4, 180.8, 186.33, 186.08, 177.61, 178.4, 183.93, 186.82, 185.99, 185.7, 189.84, 186.06, 189.47], "purchase_date": "2024-07-10", "cost_price": 132.11, "currency": "USD", "is_foreign": true, "closes_jpy": [21755.0, 20581.0, 20436.0, 20326.0, 19975.0, 18676.0, 18844.0, 18525.0, 19440.0, 19225.0, 17789.0, 17271.0, 17369.0, 17193.0, 15951.0, 17858.0, 16346.0, 15997.0, 14618.0, 15193.0, 14310.0, 15333.0, 15462.0, 16023.0, 17063.0, 17347.0, 18084.0, 18583.0, 19225.0, 18660.0, 18670.0, 17950.0, 18905.0, 18203.0, 18534.0, 18078.0, 16977.0, 17288.0, 15839.0, 15431.0, 15359.0, 14739.0, 15163.0, 15470.0, 16621.0, 16982.0, 16847.0, 16436.0, 16268.0, 16095.0, 16816.0, 16566.0, 16736.0, 17356.0, 17652.0, 17941.0, 17606.0, 17334.0, 16808.0, 17077.0, 18002.0, 18337.0, 19001.0, 19680.0, 19646.0, 20101.0, 20038.0, 20611.0, 19689.0, 20228.0, 20474.0, 20706.0, 21492.0, 21618.0, 21085.0, 21443.0, 21476.0, 21485.0, 21629.0, 21350.0, 20332.0, 20570.0, 20711.0, 21297.0, 22043.0, 22967.0, 22606.0, 22203.0, 22752.0, 22614.0, 22803.0, 22208.0, 21668.0, 22723.0, 22564.0, 22769.0, 21884.0, 20959.0, 21130.0, 20701.0, 20892.0, 20773.0, 20963.0, 21712.0, 21835.0, 21389.0, 20820.0, 20445.0, 21142.0, 20903.0, 20479.0, 20250.0, 20085.0, 19791.0, 20206.0, 21228.0, 21857.0, 22031.0, 21981.0, 21607.0, 21700.0, 21077.0, 21808.0, 22728.0, 23526.0, 22100.0, 22164.0, 21474.0, 21029.0, 20728.0, 21526.0, 20865.0, 21388.0, 21858.0, 22903.0, 23025.0, 22265.0, 18439.0, 19976.0, 19238.0, 19337.0, 18498.0, 18120.0, 18419.0, 19236.0, 19631.0, 19625.0, 20276.0, 20148.0, 20024.0, 20863.0, 21236.0, 21105.0, 21147.0, 21181.0, 20079.0, 19456.0, 18973.0, 19565.0, 17878.0, 18735.0, 17192.0, 17313.0, 17567.0, 16459.0, 16686.0, 15787.0, 15991.0, 17131.0, 17135.0, 17998.0, 17759.0, 17240.0, 17561.0, 17598.0, 17487.0, 18169.0, 18194.0, 17055.0, 16764.0, 16540.0, 16212.0, 16510.0, 16536.0, 15050.0, 13788.0, 14197.0, 14229.0, 16672.0, 15853.0, 15943.0, 15906.0, 16067.0, 14958.0, 14401.0, 13751.0, 13928.0, 14653.0, 15240.0, 15858.0, 15637.0, 15497.0, 15496.0, 15958.0, 16651.0, 16458.0, 16308.0, 16741.0, 16881.0, 17030.0, 17932.0, 19267.0, 19963.0, 19770.0, 19713.0, 19695.0, 19479.0, 19020.0, 19092.0, 18884.0, 19327.0, 19434.0, 20275.0, 19426.0, 19754.0, 20113.0, 20409.0, 19977.0, 20338.0, 20633.0, 20804.0, 20684.0, 20907.0, 20326.0, 20846.0, 20855.0, 21146.0, 20887.0, 21078.0, 21580.0, 22365.0, 22460.0, 22823.0, 22829.0, 22042.0, 22547.0, 22867.0, 22862.0, 23340.0, 23916.0, 23974.0, 24123.0, 24164.0, 25225.0, 25490.0, 25602.0, 25590.0, 25435.0, 24619.0, 25065.0, 25424.0, 25502.0, 26123.0, 26057.0, 26608.0, 26540.0, 26189.0, 26519.0, 26164.0, 26472.0, 26605.0, 26824.0, 26881.0, 27128.0, 26828.0, 26776.0, 26648.0, 26801.0, 25977.0, 25909.0, 25775.0, 26408.0, 26468.0, 26867.0, 26776.0, 26539.0, 25565.0, 25116.0, 25342.0, 25399.0, 24779.0, 24965.0, 25161.0, 26134.0, 26101.0, 26178.0, 26246.0, 25777.0, 24931.0, 25887.0, 26136.0, 27190.0, 26357.0, 26122.0, 26430.0, 26702.0, 27168.0, 27723.0, 27709.0, 27781.0, 27607.0, 27756.0, 27816.0, 28753.0, 29400.0, 28016.0, 28634.0, 27441.0, 27284.0, 27447.0, 27503.0, 27559.0, 27313.0, 27382.0, 27678.0, 28422.0, 29308.0, 30694.0, 31413.0, 30984.0, 31162.0, 31898.0, 30637.0, 29974.0, 28977.0, 28776.0, 30616.0, 29773.0, 29858.0, 28908.0, 29405.0, 28844.0, 28159.0, 29011.0, 28357.0, 28149.0, 28602.0, 27905.0, 28160.0, 27661.0, 28053.0, 28226.0, 27980.0, 28444.0, 28299.0, 28823.0, 28826.0, 28824.0, 28187.0, 27227.0, 27481.0, 27549.0, 26458.0, 27078.0, 28160.0, 28964.0, 29683.0, 29456.0, 29740.0, 29449.0, 29259.0, 29171.0, 29599.0, 29533.0, 29327.0, 29630.0, 29002.0, 29001.0, 29248.0, 29355.0, 29152.0, 29629.0, 29535.0, 28167.0, 28994.0, 29289.0, 29746.0, 28934.0, 29095.0, 29198.0, 29473.0, 29274.0], "highs_jpy": [21786.0, 21993.0, 20860.0, 20791.0, 20397.0, 19287.0, 19048.0, 19102.0, 19523.0, 19555.0, 18677.0, 17941.0, 17852.0, 17916.0, 17220.0, 18059.0, 17986.0, 16214.0, 15049.0, 15696.0, 15740.0, 15409.0, 15734.0, 16325.0, 17076.0, 17423.0, 18140.0, 18645.0, 19225.0, 19044.0, 18792.0, 18965.0, 18939.0, 18893.0, 18663.0, 18469.0, 17965.0, 17633.0, 17043.0, 16457.0, 15708.0, 15501.0, 15175.0, 15656.0, 16661.0, 17218.0, 16969.0, 16633.0, 16720.0, 16709.0, 17071.0, 16940.0, 16841.0, 17489.0, 17856.0, 18466.0, 17988.0, 17342.0, 17590.0, 17153.0, 18223.0, 18355.0, 19436.0, 19767.0, 19923.0, 20129.0, 20184.0, 20840.0, 20732.0, 20362.0, 21066.0, 20841.0, 21492.0, 21743.0, 21519.0, 21586.0, 21869.0, 21886.0, 21784.0, 21501.0, 21075.0, 20861.0, 21154.0, 21367.0, 22176.0, 22975.0, 22934.0, 22752.0, 22961.0, 23087.0, 23151.0, 22718.0, 21885.0, 22741.0, 22822.0, 23735.0, 22687.0, 21889.0, 21497.0, 20988.0, 21059.0, 21046.0, 21004.0, 21810.0, 22058.0, 21879.0, 20991.0, 21467.0, 21273.0, 21071.0, 21295.0, 20618.0, 20270.0, 20987.0, 20725.0, 21320.0, 21875.0, 22295.0, 22126.0, 21924.0, 22139.0, 21670.0, 21898.0, 22795.0, 23956.0, 24149.0, 22772.0, 22108.0, 21070.0, 21455.0, 21560.0, 21674.0, 21511.0, 22013.0, 23016.0, 23026.0, 23256.0, 19991.0, 19977.0, 19734.0, 19392.0, 19697.0, 18417.0, 18815.0, 19262.0, 19645.0, 19705.0, 20493.0, 20402.0, 20192.0, 21050.0, 21298.0, 21717.0, 21471.0, 21265.0, 21129.0, 20698.0, 19506.0, 19930.0, 20089.0, 18760.0, 18646.0, 17809.0, 17714.0, 17171.0, 16803.0, 16506.0, 16503.0, 17282.0, 17458.0, 18029.0, 18258.0, 17776.0, 17999.0, 17846.0, 17530.0, 18291.0, 18284.0, 17817.0, 17219.0, 17023.0, 16599.0, 16517.0, 16770.0, 15617.0, 14639.0, 14795.0, 15641.0, 16784.0, 16338.0, 16032.0, 16420.0, 16270.0, 15287.0, 14824.0, 14110.0, 14058.0, 14951.0, 15256.0, 15988.0, 15873.0, 15665.0, 15496.0, 16435.0, 16782.0, 16581.0, 16480.0, 16829.0, 17069.0, 17260.0, 17932.0, 19458.0, 19978.0, 19985.0, 19851.0, 19739.0, 19508.0, 19828.0, 19296.0, 19084.0, 19350.0, 19785.0, 20902.0, 20070.0, 19859.0, 20224.0, 20477.0, 20549.0, 20561.0, 20976.0, 20851.0, 20997.0, 20907.0, 20557.0, 21060.0, 21015.0, 21171.0, 21228.0, 21167.0, 21589.0, 22386.0, 22706.0, 22961.0, 22926.0, 22602.0, 22597.0, 23102.0, 23017.0, 23372.0, 24142.0, 24033.0, 24557.0, 24373.0, 25476.0, 25547.0, 25773.0, 25863.0, 25732.0, 25261.0, 25135.0, 25437.0, 25682.0, 26160.0, 26631.0, 26700.0, 27350.0, 26614.0, 26548.0, 26458.0, 26543.0, 27063.0, 26912.0, 27144.0, 27323.0, 27180.0, 26923.0, 26862.0, 26938.0, 26992.0, 25998.0, 26058.0, 26497.0, 26777.0, 26958.0, 26907.0, 27172.0, 26148.0, 25351.0, 25608.0, 25429.0, 25077.0, 25358.0, 25193.0, 26423.0, 26560.0, 26293.0, 26409.0, 26163.0, 25357.0, 26013.0, 26345.0, 27329.0, 26947.0, 26536.0, 26812.0, 26939.0, 27489.0, 27838.0, 27843.0, 28099.0, 28010.0, 28009.0, 28420.0, 28827.0, 29817.0, 29921.0, 28906.0, 28168.0, 28049.0, 27669.0, 27636.0, 27945.0, 27558.0, 27862.0, 27811.0, 28607.0, 29386.0, 31018.0, 32194.0, 31484.0, 32005.0, 32586.0, 31451.0, 31158.0, 30446.0, 28802.0, 30753.0, 30122.0, 30180.0, 29617.0, 29535.0, 29215.0, 28693.0, 29220.0, 30769.0, 29042.0, 28751.0, 27959.0, 28574.0, 28019.0, 28112.0, 28879.0, 28425.0, 28620.0, 28649.0, 29204.0, 28943.0, 29090.0, 28248.0, 28441.0, 27814.0, 27669.0, 27261.0, 27390.0, 28231.0, 29038.0, 29702.0, 29503.0, 30077.0, 29534.0, 29485.0, 29806.0, 30238.0, 30398.0, 30099.0, 29984.0, 29708.0, 29233.0, 29593.0, 29719.0, 29362.0, 30049.0, 30203.0, 28848.0, 29320.0, 29500.0, 30052.0, 29345.0, 29324.0, 29324.0, 29621.0, 29788.0], "lows_jpy": [21354.0, 20524.0, 20118.0, 20126.0, 19693.0, 18475.0, 18139.0, 18437.0, 18861.0, 19149.0, 17663.0, 16351.0, 17142.0, 17148.0, 15768.0, 16920.0, 15987.0, 15119.0, 13197.0, 14653.0, 14278.0, 14244.0, 15267.0, 15617.0, 16393.0, 16758.0, 17290.0, 18075.0, 18253.0, 18461.0, 18402.0, 17857.0, 18300.0, 17902.0, 17895.0, 17650.0, 16850.0, 16977.0, 15734.0, 15128.0, 15009.0, 14470.0, 14769.0, 15021.0, 15272.0, 16446.0, 16635.0, 16095.0, 16161.0, 16073.0, 16727.0, 16479.0, 16535.0, 16567.0, 17380.0, 17617.0, 17296.0, 16864.0, 16634.0, 16544.0, 17634.0, 17884.0, 18589.0, 19167.0, 19459.0, 19534.0, 19868.0, 20347.0, 19263.0, 19611.0, 20465.0, 20598.0, 20637.0, 21345.0, 20768.0, 21145.0, 21363.0, 21413.0, 21269.0, 20962.0, 20232.0, 20444.0, 20638.0, 20904.0, 21490.0, 22549.0, 22396.0, 21945.0, 22402.0, 22556.0, 22615.0, 21910.0, 21204.0, 21792.0, 22075.0, 21842.0, 21752.0, 20928.0, 20937.0, 20159.0, 20560.0, 20651.0, 20617.0, 20986.0, 21668.0, 21220.0, 20568.0, 20251.0, 20520.0, 20669.0, 20218.0, 20007.0, 19543.0, 19694.0, 20032.0, 20207.0, 21144.0, 21785.0, 21636.0, 21244.0, 21152.0, 21004.0, 21227.0, 21982.0, 23273.0, 22079.0, 21761.0, 21207.0, 20442.0, 20459.0, 20744.0, 20852.0, 21038.0, 21277.0, 22374.0, 22477.0, 22149.0, 18171.0, 18004.0, 18670.0, 18321.0, 18362.0, 17553.0, 18116.0, 18608.0, 19103.0, 18895.0, 19728.0, 19877.0, 19709.0, 20227.0, 20724.0, 20883.0, 20842.0, 20679.0, 20019.0, 19426.0, 18645.0, 19149.0, 17858.0, 17457.0, 16924.0, 16435.0, 17149.0, 16407.0, 15926.0, 15562.0, 15404.0, 16708.0, 16870.0, 17477.0, 17536.0, 17107.0, 17286.0, 17292.0, 17148.0, 17859.0, 17927.0, 16898.0, 16648.0, 16450.0, 15505.0, 15958.0, 15992.0, 15021.0, 13466.0, 12594.0, 13957.0, 14221.0, 14612.0, 15447.0, 15670.0, 15823.0, 14380.0, 14197.0, 13486.0, 13702.0, 14554.0, 14765.0, 15104.0, 15247.0, 15273.0, 14808.0, 15914.0, 16487.0, 16290.0, 15917.0, 16057.0, 16662.0, 16819.0, 17535.0, 18457.0, 19424.0, 19452.0, 19431.0, 19233.0, 19224.0, 18845.0, 18908.0, 18578.0, 19014.0, 19431.0, 20089.0, 19108.0, 19470.0, 19647.0, 20067.0, 19811.0, 20308.0, 20533.0, 20452.0, 20545.0, 20452.0, 20166.0, 20631.0, 20806.0, 20803.0, 20712.0, 20765.0, 21230.0, 21633.0, 22312.0, 22462.0, 22536.0, 21781.0, 21933.0, 22641.0, 22732.0, 23105.0, 23663.0, 23611.0, 23911.0, 23862.0, 25003.0, 25123.0, 25280.0, 25419.0, 25379.0, 24258.0, 24653.0, 25067.0, 25423.0, 25712.0, 25984.0, 26129.0, 26250.0, 25762.0, 25711.0, 25818.0, 26004.0, 26315.0, 26486.0, 26613.0, 26580.0, 26497.0, 26399.0, 26292.0, 26591.0, 25955.0, 24934.0, 25602.0, 25401.0, 25991.0, 26429.0, 26407.0, 25985.0, 25414.0, 24592.0, 25084.0, 25066.0, 24341.0, 24822.0, 24569.0, 25860.0, 26000.0, 25976.0, 25768.0, 25703.0, 24656.0, 25405.0, 25916.0, 25872.0, 26029.0, 25890.0, 25752.0, 26214.0, 26939.0, 26966.0, 27215.0, 27659.0, 27277.0, 27426.0, 27659.0, 28362.0, 29170.0, 27846.0, 28275.0, 27391.0, 26899.0, 27139.0, 26983.0, 27422.0, 27108.0, 26847.0, 27318.0, 28001.0, 28840.0, 29302.0, 31070.0, 30758.0, 31097.0, 31695.0, 30520.0, 29888.0, 28715.0, 27362.0, 29807.0, 29487.0, 29447.0, 28442.0, 27922.0, 28492.0, 27893.0, 28437.0, 28233.0, 27212.0, 27651.0, 26607.0, 27845.0, 27583.0, 27080.0, 27999.0, 27905.0, 27913.0, 28067.0, 28334.0, 28569.0, 28551.0, 27516.0, 27165.0, 27285.0, 27112.0, 26360.0, 26717.0, 27436.0, 28752.0, 28693.0, 29141.0, 29345.0, 29088.0, 29164.0, 29169.0, 29506.0, 29224.0, 29261.0, 29230.0, 28793.0, 28814.0, 28944.0, 28975.0, 28780.0, 29515.0, 29512.0, 28094.0, 28216.0, 29145.0, 29611.0, 28859.0, 28660.0, 28942.0, 28485.0, 29020.0], "cost_price_jpy": 21371.0};
const isForeign = true;
const currency = 'USD';
const monthEnd = '2026-01-31';
const repYear = 2026;
const repMonth = 1;
let chart = null;
let period = '6m';
let showJPY = false;

function fmtJPY(v) {
    return new Intl.NumberFormat('ja-JP', {
        style:'currency', currency:'JPY',
        maximumFractionDigits:0
    }).format(v);
}
function fmtForeign(v, cur) {
    try {
        return new Intl.NumberFormat('en-US', {
            style:'currency', currency:cur,
            minimumFractionDigits:2
        }).format(v);
    } catch { return v.toLocaleString(); }
}
function fmtP(v) {
    if (showJPY) return fmtJPY(v);
    if (!isForeign || currency === 'JPY')
        return fmtJPY(v);
    return fmtForeign(v, currency);
}
function pad2(n) { return n < 10 ? '0'+n : ''+n; }

function startDateFor(p) {
    const ey = parseInt(monthEnd.slice(0,4),10);
    const em = parseInt(monthEnd.slice(5,7),10);
    switch(p) {
        case '1m':
            return monthEnd.slice(0,8) + '01';
        case '6m': {
            let sm = em - 6; let sy = ey;
            if (sm <= 0) { sm += 12; sy--; }
            return sy + '-' + pad2(sm) + '-01';
        }
        case '1y':
            return (ey-1) + '-' + pad2(em) + '-01';
        default: return '0000-00-00';
    }
}

function getSlice() {
    const sd = startDateFor(period);
    let si = 0;
    if (period !== 'all') {
        si = S.dates.findIndex(d => d >= sd);
        if (si < 0) si = 0;
    }
    const sl = (arr) => arr ? arr.slice(si) : null;
    return {
        dates: sl(S.dates),
        closes: sl(showJPY && S.closes_jpy
            ? S.closes_jpy : S.closes),
        highs: sl(showJPY && S.highs_jpy
            ? S.highs_jpy : S.highs),
        lows: sl(showJPY && S.lows_jpy
            ? S.lows_jpy : S.lows),
        cost: showJPY && S.cost_price_jpy
            ? S.cost_price_jpy : S.cost_price,
    };
}

function draw() {
    if (chart) chart.destroy();
    const s = getSlice();
    const costLine = s.dates.map(() => s.cost);
    const ctx = document.getElementById('icChart')
        .getContext('2d');
    chart = new Chart(ctx, {
        type:'line',
        data:{
            labels: s.dates,
            datasets:[
                {
                    label:'終値', data:s.closes,
                    borderColor:'#2563eb',
                    backgroundColor:
                        'rgba(37,99,235,0.08)',
                    borderWidth:2.5, tension:0,
                    fill:false,
                    pointRadius: s.dates.length > 90
                        ? 0 : 3,
                    pointHoverRadius:5,
                    pointBackgroundColor:'#2563eb'
                },
                {
                    label:'取得単価', data:costLine,
                    borderColor:'#f59e0b',
                    borderWidth:2,
                    borderDash:[6,4], tension:0,
                    fill:false,
                    pointRadius:0,
                    pointHoverRadius:0
                }
            ]
        },
        options:{
            responsive:true,
            maintainAspectRatio:false,
            plugins:{
                legend:{
                    display:true, position:'top',
                    align:'end'
                },
                tooltip:{
                    mode:'index', intersect:false,
                    callbacks:{
                        title: items =>
                            s.dates[items[0].dataIndex],
                        label: c => {
                            if (c.datasetIndex === 1)
                                return '取得単価: '
                                    + fmtP(c.parsed.y);
                            return '終値: '
                                + fmtP(c.parsed.y);
                        },
                        afterBody: items => {
                            const i = items[0].dataIndex;
                            const lines = [];
                            lines.push('高値: '
                                + fmtP(s.highs[i]));
                            lines.push('安値: '
                                + fmtP(s.lows[i]));
                            const d = s.closes[i]
                                - s.cost;
                            const r = s.cost > 0
                                ? ((d/s.cost)*100)
                                    .toFixed(1) : '0.0';
                            const sg = d>=0?'+':'';
                            lines.push('');
                            lines.push('取得比: '
                                + sg + r + '%');
                            return lines;
                        }
                    }
                }
            },
            scales:{
                x:{
                    ticks:{
                        autoSkip: false,
                        maxRotation: 45,
                        callback: function(val, idx) {
                            const d = s.dates[idx];
                            if (!d) return null;
                            const n = s.dates.length;
                            const p = d.split('-');
                            const y = p[0];
                            const m = parseInt(p[1],10);
                            const day = p[2]
                                ? '/'+parseInt(p[2],10)
                                : '';
                            const full = y+'/'+m+day;
                            const sh = m + day;
                            if (idx === 0
                                || idx === n - 1)
                                return full;
                            if (idx > 0) {
                                const pv =
                                    s.dates[idx-1];
                                if (pv && pv.split(
                                    '-')[0] !== y)
                                    return full;
                            }
                            const step = Math.max(
                                1,
                                Math.floor(n / 10));
                            if (idx % step === 0
                                && (n - idx) > step/2)
                                return sh;
                            return null;
                        }
                    }
                },
                y:{
                    beginAtZero:false,
                    ticks:{ callback: v => fmtP(v) }
                }
            },
            interaction:{
                mode:'nearest', axis:'x',
                intersect:false
            }
        }
    });
    // 情報パネル
    const lc = s.closes[s.closes.length-1];
    const cp = s.cost;
    const df = lc - cp;
    const rt = cp > 0
        ? ((df/cp)*100).toFixed(2) : '0.00';
    const cl = df >= 0 ? 'positive' : 'negative';
    const sg = df >= 0 ? '+' : '';
    const ph = Math.max(...s.highs);
    const pl2 = Math.min(...s.lows);
    let hlLbl;
    if (period === '1m')
        hlLbl = repYear+'年'+repMonth+'月 高値/安値';
    else if (period === '6m')
        hlLbl = '過去6ヶ月 高値/安値';
    else if (period === '1y')
        hlLbl = '過去1年 高値/安値';
    else hlLbl = '全期間 高値/安値';
    document.getElementById('icInfo').innerHTML = `
        <div class="ic-info-item">
            <span class="ic-info-label">取得単価</span>
            <span class="ic-info-value">
                ${fmtP(cp)}</span></div>
        <div class="ic-info-item">
            <span class="ic-info-label">月末終値</span>
            <span class="ic-info-value">
                ${fmtP(lc)}</span></div>
        <div class="ic-info-item">
            <span class="ic-info-label">取得比</span>
            <span class="ic-info-value ${cl}">
                ${sg}${rt}%</span></div>
        <div class="ic-info-item">
            <span class="ic-info-label">${hlLbl}</span>
            <span class="ic-info-value">
                ${fmtP(ph)} / ${fmtP(pl2)}</span>
        </div>`;
}

// 期間切替
document.querySelectorAll('#periodTabs button')
    .forEach(b => {
    b.onclick = () => {
        document.querySelectorAll('#periodTabs button')
            .forEach(x => x.classList.remove('active'));
        b.classList.add('active');
        period = b.dataset.period;
        draw();
    };
});

// 外貨/円切替
const fxEl = document.getElementById('fxToggle');
if (fxEl) {
    fxEl.querySelectorAll('button').forEach(b => {
        b.onclick = () => {
            fxEl.querySelectorAll('button')
                .forEach(x =>
                    x.classList.remove('active'));
            b.classList.add('active');
            showJPY = b.dataset.fx === 'jpy';
            draw();
        };
    });
}

draw();
})();
</script>