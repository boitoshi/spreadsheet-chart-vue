<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
.ic-container {
    max-width: 900px; margin: 0 auto; padding: 20px;
    font-family: -apple-system, BlinkMacSystemFont,
        "Segoe UI", Roboto, sans-serif;
}
.ic-title {
    font-size: 20px; font-weight: 700;
    margin-bottom: 16px; color: #1a1a1a;
}
.ic-date-label {
    font-size: 13px; font-weight: 400;
    color: #94a3b8; margin-left: 8px;
}
.ic-view-tabs {
    display: flex; gap: 4px; margin-bottom: 16px;
    background: #f1f5f9; border-radius: 8px;
    padding: 4px;
}
.ic-view-tab {
    flex: 1; padding: 10px 16px; background: none;
    border: none; border-radius: 6px; cursor: pointer;
    font-size: 14px; font-weight: 500; color: #64748b;
    transition: all 0.2s;
}
.ic-view-tab:hover { color: #334155; }
.ic-view-tab.active {
    background: white; color: #2563eb;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.ic-stock-tabs, .ic-period-tabs {
    display: flex; gap: 8px; margin-bottom: 16px;
    flex-wrap: wrap;
}
.ic-stock-tab {
    padding: 8px 18px; background: #f8fafc;
    border: 1px solid #e2e8f0; border-radius: 20px;
    cursor: pointer; font-size: 13px; font-weight: 500;
    color: #475569; transition: all 0.2s;
}
.ic-stock-tab:hover {
    border-color: #2563eb; color: #2563eb;
}
.ic-stock-tab.active {
    background: #2563eb; border-color: #2563eb;
    color: white;
}
.ic-chart-wrapper {
    position: relative; height: 400px;
    background: white; padding: 16px;
    border-radius: 12px; border: 1px solid #e2e8f0;
}
.ic-info {
    margin-top: 16px; padding: 16px;
    background: #f8fafc; border-radius: 10px;
    display: grid;
    grid-template-columns:
        repeat(auto-fit, minmax(180px, 1fr));
    gap: 12px;
}
.ic-info-item {
    display: flex; flex-direction: column;
}
.ic-info-label {
    font-size: 11px; color: #94a3b8;
    margin-bottom: 4px; text-transform: uppercase;
    letter-spacing: 0.05em;
}
.ic-info-value {
    font-size: 18px; font-weight: 600;
    color: #1e293b;
}
.ic-info-value.positive { color: #16a34a; }
.ic-info-value.negative { color: #dc2626; }
@media (max-width: 600px) {
    .ic-container { padding: 12px; }
    .ic-title { font-size: 16px; margin-bottom: 12px; }
    .ic-chart-wrapper { height: 280px; padding: 10px; }
    .ic-stock-tab {
        padding: 6px 12px; font-size: 12px;
    }
    .ic-view-tab {
        padding: 8px 10px; font-size: 13px;
    }
    .ic-info {
        grid-template-columns: 1fr 1fr;
        gap: 8px; padding: 12px;
    }
    .ic-info-value { font-size: 15px; }
    .ic-info-label { font-size: 10px; }
}
@media (max-width: 380px) {
    .ic-info {
        grid-template-columns: 1fr;
    }
}
</style>
<div class="ic-container">
    <div class="ic-title">任天堂 (7974.T)
        <span class="ic-date-label">2026年1月末時点</span>
    </div>
    
    <div class="ic-period-tabs" id="periodTabs">
        <button class="ic-stock-tab" data-period="1m">
            1M</button>
        <button class="ic-stock-tab active"
            data-period="6m">6M</button>
        <button class="ic-stock-tab" data-period="1y">
            1Y</button>
    </div>
    <div class="ic-chart-wrapper">
        <canvas id="icChart"></canvas>
    </div>
    <div class="ic-info" id="icInfo"></div>
</div>
<script>
(function() {
const S = {"symbol": "7974.T", "dates": ["2023-06-28", "2023-06-29", "2023-06-30", "2023-07-03", "2023-07-04", "2023-07-05", "2023-07-06", "2023-07-07", "2023-07-10", "2023-07-11", "2023-07-12", "2023-07-13", "2023-07-14", "2023-07-18", "2023-07-19", "2023-07-20", "2023-07-21", "2023-07-24", "2023-07-25", "2023-07-26", "2023-07-27", "2023-07-28", "2023-07-31", "2023-08-01", "2023-08-02", "2023-08-03", "2023-08-04", "2023-08-07", "2023-08-08", "2023-08-09", "2023-08-10", "2023-08-14", "2023-08-15", "2023-08-16", "2023-08-17", "2023-08-18", "2023-08-21", "2023-08-22", "2023-08-23", "2023-08-24", "2023-08-25", "2023-08-28", "2023-08-29", "2023-08-30", "2023-08-31", "2023-09-01", "2023-09-04", "2023-09-05", "2023-09-06", "2023-09-07", "2023-09-08", "2023-09-11", "2023-09-12", "2023-09-13", "2023-09-14", "2023-09-15", "2023-09-19", "2023-09-20", "2023-09-21", "2023-09-22", "2023-09-25", "2023-09-26", "2023-09-27", "2023-09-28", "2023-09-29", "2023-10-02", "2023-10-03", "2023-10-04", "2023-10-05", "2023-10-06", "2023-10-10", "2023-10-11", "2023-10-12", "2023-10-13", "2023-10-16", "2023-10-17", "2023-10-18", "2023-10-19", "2023-10-20", "2023-10-23", "2023-10-24", "2023-10-25", "2023-10-26", "2023-10-27", "2023-10-30", "2023-10-31", "2023-11-01", "2023-11-02", "2023-11-06", "2023-11-07", "2023-11-08", "2023-11-09", "2023-11-10", "2023-11-13", "2023-11-14", "2023-11-15", "2023-11-16", "2023-11-17", "2023-11-20", "2023-11-21", "2023-11-22", "2023-11-24", "2023-11-27", "2023-11-28", "2023-11-29", "2023-11-30", "2023-12-01", "2023-12-04", "2023-12-05", "2023-12-06", "2023-12-07", "2023-12-08", "2023-12-11", "2023-12-12", "2023-12-13", "2023-12-14", "2023-12-15", "2023-12-18", "2023-12-19", "2023-12-20", "2023-12-21", "2023-12-22", "2023-12-25", "2023-12-26", "2023-12-27", "2023-12-28", "2023-12-29", "2024-01-04", "2024-01-05", "2024-01-09", "2024-01-10", "2024-01-11", "2024-01-12", "2024-01-15", "2024-01-16", "2024-01-17", "2024-01-18", "2024-01-19", "2024-01-22", "2024-01-23", "2024-01-24", "2024-01-25", "2024-01-26", "2024-01-29", "2024-01-30", "2024-01-31", "2024-02-01", "2024-02-02", "2024-02-05", "2024-02-06", "2024-02-07", "2024-02-08", "2024-02-09", "2024-02-13", "2024-02-14", "2024-02-15", "2024-02-16", "2024-02-19", "2024-02-20", "2024-02-21", "2024-02-22", "2024-02-26", "2024-02-27", "2024-02-28", "2024-02-29", "2024-03-01", "2024-03-04", "2024-03-05", "2024-03-06", "2024-03-07", "2024-03-08", "2024-03-11", "2024-03-12", "2024-03-13", "2024-03-14", "2024-03-15", "2024-03-18", "2024-03-19", "2024-03-21", "2024-03-22", "2024-03-25", "2024-03-26", "2024-03-27", "2024-03-28", "2024-03-29", "2024-04-01", "2024-04-02", "2024-04-03", "2024-04-04", "2024-04-05", "2024-04-08", "2024-04-09", "2024-04-10", "2024-04-11", "2024-04-12", "2024-04-15", "2024-04-16", "2024-04-17", "2024-04-18", "2024-04-19", "2024-04-22", "2024-04-23", "2024-04-24", "2024-04-25", "2024-04-26", "2024-04-30", "2024-05-01", "2024-05-02", "2024-05-07", "2024-05-08", "2024-05-09", "2024-05-10", "2024-05-13", "2024-05-14", "2024-05-15", "2024-05-16", "2024-05-17", "2024-05-20", "2024-05-21", "2024-05-22", "2024-05-23", "2024-05-24", "2024-05-27", "2024-05-28", "2024-05-29", "2024-05-30", "2024-05-31", "2024-06-03", "2024-06-04", "2024-06-05", "2024-06-06", "2024-06-07", "2024-06-10", "2024-06-11", "2024-06-12", "2024-06-13", "2024-06-14", "2024-06-17", "2024-06-18", "2024-06-19", "2024-06-20", "2024-06-21", "2024-06-24", "2024-06-25", "2024-06-26", "2024-06-27", "2024-06-28", "2024-07-01", "2024-07-02", "2024-07-03", "2024-07-04", "2024-07-05", "2024-07-08", "2024-07-09", "2024-07-10", "2024-07-11", "2024-07-12", "2024-07-16", "2024-07-17", "2024-07-18", "2024-07-19", "2024-07-22", "2024-07-23", "2024-07-24", "2024-07-25", "2024-07-26", "2024-07-29", "2024-07-30", "2024-07-31", "2024-08-01", "2024-08-02", "2024-08-05", "2024-08-06", "2024-08-07", "2024-08-08", "2024-08-09", "2024-08-13", "2024-08-14", "2024-08-15", "2024-08-16", "2024-08-19", "2024-08-20", "2024-08-21", "2024-08-22", "2024-08-23", "2024-08-26", "2024-08-27", "2024-08-28", "2024-08-29", "2024-08-30", "2024-09-02", "2024-09-03", "2024-09-04", "2024-09-05", "2024-09-06", "2024-09-09", "2024-09-10", "2024-09-11", "2024-09-12", "2024-09-13", "2024-09-17", "2024-09-18", "2024-09-19", "2024-09-20", "2024-09-24", "2024-09-25", "2024-09-26", "2024-09-27", "2024-09-30", "2024-10-01", "2024-10-02", "2024-10-03", "2024-10-04", "2024-10-07", "2024-10-08", "2024-10-09", "2024-10-10", "2024-10-11", "2024-10-15", "2024-10-16", "2024-10-17", "2024-10-18", "2024-10-21", "2024-10-22", "2024-10-23", "2024-10-24", "2024-10-25", "2024-10-28", "2024-10-29", "2024-10-30", "2024-10-31", "2024-11-01", "2024-11-05", "2024-11-06", "2024-11-07", "2024-11-08", "2024-11-11", "2024-11-12", "2024-11-13", "2024-11-14", "2024-11-15", "2024-11-18", "2024-11-19", "2024-11-20", "2024-11-21", "2024-11-22", "2024-11-25", "2024-11-26", "2024-11-27", "2024-11-28", "2024-11-29", "2024-12-02", "2024-12-03", "2024-12-04", "2024-12-05", "2024-12-06", "2024-12-09", "2024-12-10", "2024-12-11", "2024-12-12", "2024-12-13", "2024-12-16", "2024-12-17", "2024-12-18", "2024-12-19", "2024-12-20", "2024-12-23", "2024-12-24", "2024-12-25", "2024-12-26", "2024-12-27", "2024-12-30", "2025-01-06", "2025-01-07", "2025-01-08", "2025-01-09", "2025-01-10", "2025-01-14", "2025-01-15", "2025-01-16", "2025-01-17", "2025-01-20", "2025-01-21", "2025-01-22", "2025-01-23", "2025-01-24", "2025-01-27", "2025-01-28", "2025-01-29", "2025-01-30", "2025-01-31", "2025-02-03", "2025-02-04", "2025-02-05", "2025-02-06", "2025-02-07", "2025-02-10", "2025-02-12", "2025-02-13", "2025-02-14", "2025-02-17", "2025-02-18", "2025-02-19", "2025-02-20", "2025-02-21", "2025-02-25", "2025-02-26", "2025-02-27", "2025-02-28", "2025-03-03", "2025-03-04", "2025-03-05", "2025-03-06", "2025-03-07", "2025-03-10", "2025-03-11", "2025-03-12", "2025-03-13", "2025-03-14", "2025-03-17", "2025-03-18", "2025-03-19", "2025-03-21", "2025-03-24", "2025-03-25", "2025-03-26", "2025-03-27", "2025-03-28", "2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-04", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-18", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-28", "2025-04-30", "2025-05-01", "2025-05-02", "2025-05-07", "2025-05-08", "2025-05-09", "2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-19", "2025-05-20", "2025-05-21", "2025-05-22", "2025-05-23", "2025-05-26", "2025-05-27", "2025-05-28", "2025-05-29", "2025-05-30", "2025-06-02", "2025-06-03", "2025-06-04", "2025-06-05", "2025-06-06", "2025-06-09", "2025-06-10", "2025-06-11", "2025-06-12", "2025-06-13", "2025-06-16", "2025-06-17", "2025-06-18", "2025-06-19", "2025-06-20", "2025-06-23", "2025-06-24", "2025-06-25", "2025-06-26", "2025-06-27", "2025-06-30", "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-04", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-22", "2025-07-23", "2025-07-24", "2025-07-25", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-25", "2025-08-26", "2025-08-27", "2025-08-28", "2025-08-29", "2025-09-01", "2025-09-02", "2025-09-03", "2025-09-04", "2025-09-05", "2025-09-08", "2025-09-09", "2025-09-10", "2025-09-11", "2025-09-12", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-22", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-29", "2025-09-30", "2025-10-01", "2025-10-02", "2025-10-03", "2025-10-06", "2025-10-07", "2025-10-08", "2025-10-09", "2025-10-10", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-25", "2025-11-26", "2025-11-27", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-25", "2025-12-26", "2025-12-29", "2025-12-30", "2026-01-05", "2026-01-06", "2026-01-07", "2026-01-08", "2026-01-09", "2026-01-13", "2026-01-14", "2026-01-15", "2026-01-16", "2026-01-19", "2026-01-20", "2026-01-21", "2026-01-22", "2026-01-23", "2026-01-26", "2026-01-27", "2026-01-28", "2026-01-29", "2026-01-30"], "closes": [6239.38, 6298.72, 6260.44, 6303.5, 6238.43, 6231.73, 6042.25, 6077.66, 6033.64, 5987.7, 6028.85, 6147.52, 6114.02, 6086.27, 6156.13, 6149.43, 6141.77, 6230.77, 6165.7, 6028.85, 6101.58, 6080.53, 6172.4, 6181.01, 6081.48, 6083.4, 5906.36, 5963.78, 5893.92, 5880.52, 5981.96, 5979.09, 6023.11, 6021.2, 5914.02, 5850.86, 5864.25, 5893.92, 5943.68, 5880.52, 5821.19, 5909.23, 5906.36, 5951.34, 5997.27, 5998.23, 5997.27, 6003.97, 6050.86, 6093.93, 6084.36, 6095.84, 6094.88, 6037.46, 6080.53, 6065.22, 6173.35, 5996.32, 5888.18, 5886.27, 5956.12, 5990.57, 5957.08, 5963.87, 6039.48, 5942.54, 5971.62, 5921.21, 6029.79, 6054.02, 6118.0, 6116.06, 6155.81, 6006.52, 6010.4, 5935.75, 5923.15, 5905.7, 5914.43, 5881.47, 5895.04, 5991.01, 5928.97, 6030.76, 5929.94, 6030.76, 6117.03, 6162.6, 6235.3, 6189.74, 6566.85, 6932.32, 6651.18, 6799.51, 6793.69, 6780.12, 6837.31, 6733.58, 6592.05, 6636.64, 6708.38, 6644.4, 6649.25, 6615.32, 6617.25, 6700.63, 6697.72, 6605.62, 6604.65, 6664.76, 6652.15, 6590.11, 6679.3, 6732.62, 6714.2, 6649.25, 6570.72, 6604.65, 6723.89, 6752.0, 6733.58, 6733.58, 6721.95, 6773.33, 6908.08, 6914.87, 7133.96, 6956.55, 7002.11, 7307.48, 7583.77, 7687.49, 7876.53, 7882.35, 7791.22, 7697.19, 7819.33, 7887.19, 7855.2, 7841.63, 7695.25, 7728.21, 7653.56, 7843.57, 8018.07, 8055.87, 8055.87, 8216.8, 8157.66, 8119.85, 8113.07, 8356.39, 8433.95, 8443.64, 8599.72, 8676.3, 8602.62, 8100.47, 8010.31, 8144.09, 8161.54, 8287.56, 8247.82, 8110.16, 8143.12, 8224.55, 8089.8, 8133.43, 8074.29, 8068.47, 7979.29, 8057.81, 7950.21, 7980.26, 7972.5, 7972.5, 8032.61, 8102.4, 8121.79, 8168.33, 8045.21, 8053.94, 8152.82, 8133.12, 8080.93, 8084.87, 8022.83, 7687.02, 7767.77, 7623.02, 7738.23, 7761.87, 7669.3, 7605.29, 7617.11, 7551.13, 7409.32, 7469.39, 7473.33, 7341.37, 7410.31, 7383.72, 7395.54, 7293.12, 7532.42, 7602.33, 7520.6, 7459.55, 7640.74, 7225.17, 7481.21, 7729.37, 7888.9, 8306.44, 8193.19, 8468.92, 8373.4, 8263.11, 8279.85, 8223.72, 8154.78, 8126.23, 8160.69, 8067.14, 8142.97, 8230.61, 8424.61, 8538.84, 8715.11, 8618.61, 8662.92, 8621.56, 8605.8, 8542.78, 8414.76, 8235.54, 8351.74, 8282.8, 8539.83, 8450.21, 8358.63, 8352.72, 8363.55, 8500.44, 8551.64, 8466.95, 8425.59, 8615.65, 8739.73, 8751.55, 8695.42, 8761.4, 8657.01, 8812.6, 8862.83, 8961.3, 8780.11, 8690.49, 8614.67, 8419.68, 8443.32, 8401.96, 8363.55, 8356.66, 8153.8, 8121.3, 8214.85, 8220.76, 8260.15, 7981.47, 7794.36, 6506.3, 7392.58, 7531.43, 7450.68, 7682.1, 7631.88, 7852.46, 7777.62, 7994.27, 7943.06, 8024.8, 8127.21, 8149.86, 8099.64, 7987.38, 7925.34, 7845.57, 7750.05, 7781.56, 7802.24, 7805.2, 7580.67, 7613.17, 7644.68, 7626.95, 7577.72, 7424.09, 7535.37, 7467.42, 7430.99, 7443.79, 7556.05, 7553.1, 7598.4, 7511.74, 7874.13, 7960.18, 7552.67, 7612.02, 7588.28, 7680.27, 7658.51, 7998.75, 7950.29, 7791.04, 7826.65, 7792.03, 7857.31, 7842.48, 7906.77, 7931.5, 7963.15, 7922.59, 7989.85, 7980.95, 7914.68, 8070.96, 8052.16, 8003.7, 8056.12, 7876.11, 7572.46, 8011.61, 8118.43, 8103.6, 8159.98, 8248.99, 7977.98, 8010.62, 8168.88, 8110.52, 8086.78, 8136.24, 8113.49, 8076.89, 8109.53, 8218.33, 8433.95, 8689.14, 8713.86, 8758.37, 8842.45, 9081.8, 9193.57, 8959.16, 9115.43, 8938.39, 9003.67, 9039.27, 9024.44, 9083.78, 9386.44, 9163.9, 9307.32, 9031.36, 9070.92, 9127.3, 9099.61, 9158.95, 9247.97, 9162.91, 8971.03, 9058.07, 8805.85, 9019.49, 9147.08, 9230.17, 9460.62, 9485.35, 9080.82, 8803.87, 8945.31, 9301.38, 9454.69, 9782.08, 9686.14, 10138.15, 10078.8, 10311.24, 10118.37, 10063.97, 10286.51, 10583.24, 10879.97, 10687.09, 10815.68, 10860.18, 11127.24, 11122.29, 11270.66, 11325.06, 11631.67, 11364.62, 11330.0, 11186.58, 10983.82, 11275.6, 11038.22, 10944.26, 11008.55, 11053.06, 11260.76, 10222.22, 9895.82, 9945.28, 10049.13, 10068.91, 10152.99, 10172.77, 10157.93, 10434.88, 10776.11, 10573.35, 10647.53, 11206.37, 10909.64, 10800.0, 10077.34, 10172.03, 10386.34, 10047.43, 9944.77, 9164.3, 9809.21, 9374.62, 10471.06, 10007.56, 10316.56, 10271.71, 10007.56, 10311.58, 10336.5, 10211.9, 10142.13, 10381.35, 10964.46, 11363.17, 11398.06, 11791.78, 12105.76, 12320.07, 12310.1, 11981.17, 11781.81, 11542.59, 11966.21, 11662.2, 11408.02, 11602.39, 11582.46, 11492.75, 11228.61, 11163.82, 11761.88, 11926.34, 12165.57, 12110.75, 12290.17, 11796.76, 11707.05, 11657.22, 12050.94, 11811.72, 11866.54, 12040.97, 12065.89, 11627.31, 11756.89, 11776.83, 11906.41, 12399.81, 13217.16, 13232.11, 12688.87, 12629.07, 12843.37, 13311.85, 13376.64, 13585.96, 13835.16, 13386.61, 12958.0, 13067.64, 13157.35, 13157.35, 13002.85, 12943.05, 12639.03, 12644.02, 12449.65, 12484.54, 12653.99, 12943.05, 12928.1, 12808.48, 12898.19, 13157.35, 12838.39, 12803.5, 12773.6, 12673.92, 12649.0, 12554.31, 13197.22, 13371.66, 13436.45, 13710.56, 14308.62, 14139.17, 14228.88, 14134.19, 14353.48, 14607.65, 14228.88, 13775.35, 13640.79, 13715.54, 13705.58, 13481.3, 13331.79, 13386.61, 13267.0, 13107.52, 13067.64, 13062.66, 13257.03, 13227.13, 13745.45, 13695.61, 13745.45, 14104.29, 14193.99, 13730.5, 13491.27, 13072.63, 12758.65, 12653.99, 13057.68, 12793.53, 12958.0, 12800.0, 12805.0, 13000.0, 12785.0, 12660.0, 12865.0, 12950.0, 12845.0, 12665.0, 12385.0, 12400.0, 12515.0, 12150.0, 12470.0, 12865.0, 13240.0, 13105.0, 13050.0, 12840.0, 13050.0, 13025.0, 12940.0, 12910.0, 13045.0, 12945.0, 13750.0, 14105.0, 13905.0, 13420.0, 13615.0, 13885.0, 13665.0, 13445.0, 13430.0, 13200.0, 13030.0, 13275.0, 13300.0, 13120.0, 13235.0, 13170.0, 13280.0, 13065.0, 12865.0, 12655.0, 12875.0, 12500.0, 12320.0, 11900.0, 11580.0, 11400.0, 11730.0, 11495.0, 11350.0, 11180.0, 10985.0, 10650.0, 10245.0, 10515.0, 10435.0, 10550.0, 10795.0, 10740.0, 10595.0, 10650.0, 10855.0, 10350.0, 10180.0, 10165.0, 9950.0, 10220.0, 10450.0, 10520.0, 10585.0, 10445.0, 10180.0, 9950.0, 10400.0, 10415.0, 10375.0, 10165.0, 9931.0, 10055.0], "highs": [6262.35, 6354.22, 6270.96, 6323.6, 6286.27, 6273.83, 6235.56, 6136.03, 6075.74, 6085.31, 6207.8, 6156.13, 6212.59, 6123.59, 6160.91, 6193.45, 6181.97, 6257.57, 6197.28, 6118.81, 6117.85, 6105.41, 6192.49, 6189.62, 6154.21, 6104.45, 5981.0, 5995.36, 6006.84, 5926.46, 5985.79, 6039.38, 6029.81, 6059.48, 6018.33, 5907.32, 5903.49, 5921.67, 5943.68, 5958.99, 5862.34, 5914.97, 5970.48, 5995.36, 6018.33, 6031.72, 6030.77, 6046.08, 6088.18, 6093.93, 6142.73, 6173.35, 6136.99, 6118.81, 6131.25, 6094.88, 6173.35, 6192.49, 6003.01, 5910.19, 5965.69, 6008.76, 5983.87, 6038.51, 6050.14, 6092.8, 6018.15, 5936.72, 6032.69, 6123.82, 6121.88, 6142.24, 6188.77, 6107.34, 6044.33, 6037.54, 5965.81, 6004.58, 5938.66, 5901.82, 5909.58, 5998.77, 5971.62, 6033.66, 6001.67, 6044.33, 6181.99, 6222.7, 6236.27, 6250.81, 6624.04, 6941.04, 6893.54, 6864.46, 6893.54, 6802.41, 6848.95, 6829.56, 6708.38, 6655.06, 6725.83, 6752.97, 6770.42, 6688.99, 6640.52, 6704.5, 6716.14, 6688.02, 6657.0, 6682.21, 6768.48, 6678.33, 6730.68, 6809.2, 6755.88, 6685.11, 6628.89, 6604.65, 6747.16, 6801.44, 6742.31, 6798.54, 6798.54, 6773.33, 6914.87, 6967.22, 7168.85, 7051.55, 7067.07, 7336.56, 7660.35, 7828.06, 7929.85, 7905.61, 7905.61, 7855.2, 7836.78, 7996.74, 7929.85, 7956.99, 7811.58, 7764.08, 7760.2, 7852.3, 8131.49, 8055.87, 8086.89, 8230.37, 8247.82, 8184.81, 8359.3, 8424.25, 8439.76, 8559.97, 8609.41, 8751.92, 8730.59, 8174.14, 8161.54, 8203.22, 8198.38, 8343.79, 8385.47, 8215.83, 8184.81, 8238.12, 8230.37, 8149.91, 8101.44, 8203.22, 8070.41, 8057.81, 8019.04, 8030.67, 7972.5, 8018.07, 8032.61, 8103.37, 8283.69, 8189.65, 8166.39, 8104.34, 8210.98, 8183.34, 8163.65, 8182.36, 8101.61, 7926.32, 7842.62, 7638.77, 7751.03, 7766.79, 7748.08, 7622.03, 7720.51, 7551.13, 7474.32, 7529.46, 7538.33, 7460.53, 7432.96, 7479.24, 7433.94, 7374.86, 7535.37, 7658.47, 7624.0, 7506.81, 7713.61, 7763.84, 7537.34, 7878.07, 7907.61, 8311.36, 8289.7, 8468.92, 8411.81, 8407.87, 8357.64, 8366.51, 8270.0, 8214.85, 8160.69, 8130.17, 8185.31, 8238.49, 8499.45, 8577.25, 8748.59, 8739.73, 8807.68, 8636.33, 8623.53, 8620.58, 8521.11, 8468.92, 8405.9, 8320.22, 8596.94, 8675.72, 8415.75, 8444.3, 8405.9, 8516.19, 8551.64, 8534.9, 8505.36, 8677.69, 8857.9, 8828.36, 8792.91, 8803.74, 8722.99, 8851.01, 8862.83, 9030.24, 8883.51, 8805.71, 8700.34, 8556.57, 8545.73, 8490.59, 8464.0, 8399.99, 8300.53, 8216.82, 8256.21, 8246.37, 8285.76, 8026.77, 7955.86, 7086.32, 7404.4, 7711.64, 7581.66, 7746.11, 7714.6, 7888.9, 7832.77, 8017.9, 8018.89, 8053.35, 8141.98, 8205.99, 8187.28, 8045.48, 7930.26, 7886.93, 7836.71, 7809.13, 7857.39, 7846.56, 7715.58, 7718.54, 7822.92, 7626.95, 7644.68, 7577.72, 7636.8, 7529.46, 7482.19, 7549.16, 7596.43, 7705.73, 7716.57, 7570.82, 7886.93, 7969.08, 7693.13, 7708.95, 7614.0, 7744.56, 7718.84, 8059.09, 7968.09, 7863.25, 7883.03, 7844.46, 7940.4, 7918.64, 7996.78, 8054.14, 7995.79, 7992.82, 8028.43, 8014.58, 7979.96, 8129.31, 8096.67, 8114.48, 8182.72, 7979.96, 7825.66, 8049.2, 8271.74, 8201.52, 8215.36, 8304.38, 8183.71, 8158.0, 8226.24, 8156.02, 8279.65, 8160.96, 8179.76, 8110.52, 8159.98, 8251.96, 8473.52, 8689.14, 8751.45, 8943.33, 8887.94, 9178.74, 9267.75, 9206.43, 9133.24, 9070.92, 9076.86, 9102.58, 9042.24, 9158.95, 9482.38, 9297.43, 9364.68, 9317.21, 9197.53, 9206.43, 9109.5, 9176.76, 9266.76, 9336.99, 9191.59, 9094.66, 8990.81, 9034.33, 9172.8, 9299.4, 9520.96, 9625.8, 9492.28, 9358.75, 9074.88, 9315.23, 9668.33, 9846.37, 9819.66, 10197.5, 10242.0, 10355.75, 10281.57, 10152.99, 10464.55, 10662.37, 10889.86, 10776.11, 10879.97, 10904.69, 11161.86, 11161.86, 11334.95, 11384.4, 11671.24, 11557.49, 11438.8, 11448.69, 11265.71, 11334.95, 11226.15, 11260.76, 11038.22, 11211.31, 11285.49, 10761.28, 10148.04, 9945.28, 10108.48, 10331.02, 10237.06, 10355.75, 10246.95, 10533.79, 10786.0, 10884.91, 10716.77, 11325.06, 11013.49, 10939.54, 10515.92, 10476.04, 10436.17, 10186.98, 10077.34, 9590.91, 9987.63, 9711.52, 10491.0, 10062.39, 10466.08, 10530.87, 10221.87, 10311.58, 10346.46, 10326.53, 10196.95, 10540.83, 10999.35, 11378.12, 11572.49, 11816.7, 12105.76, 12499.49, 12434.7, 12414.76, 12330.04, 11931.33, 12130.68, 12050.94, 11582.46, 11642.27, 11592.43, 11647.25, 11522.65, 11427.96, 11761.88, 11986.15, 12170.55, 12384.86, 12330.04, 12085.83, 11796.76, 11951.26, 12075.86, 12145.63, 12170.55, 12045.96, 12140.65, 11811.72, 11946.28, 11881.49, 12145.63, 12399.81, 13276.97, 13456.38, 13092.56, 12698.84, 12938.07, 13426.48, 13531.14, 13595.93, 13860.08, 13765.38, 13182.27, 13262.01, 13267.0, 13177.29, 13057.68, 13002.85, 12933.08, 12763.63, 12544.34, 12713.79, 12703.82, 12943.05, 13032.76, 13182.27, 12933.08, 13242.08, 13286.93, 13077.61, 12818.45, 12838.39, 12693.86, 12898.19, 13411.53, 13610.88, 13546.09, 13785.32, 14527.91, 14298.65, 14313.61, 14527.91, 14403.32, 14747.2, 14552.83, 14159.11, 13775.35, 13845.12, 13889.98, 13705.58, 13426.48, 13446.42, 13401.56, 13177.29, 13197.22, 13182.27, 13326.81, 13346.74, 13775.35, 13984.67, 13825.19, 14243.83, 14248.82, 13984.67, 13730.5, 13446.42, 13007.84, 13267.0, 13087.58, 13007.84, 13142.4, 12995.0, 12970.0, 13065.0, 12910.0, 12740.0, 12970.0, 12950.0, 13230.0, 12925.0, 12680.0, 12540.0, 12620.0, 12375.0, 12525.0, 12965.0, 13240.0, 13310.0, 13100.0, 13125.0, 13190.0, 13060.0, 13175.0, 12945.0, 13120.0, 13240.0, 14265.0, 14630.0, 14105.0, 13860.0, 13755.0, 13885.0, 13985.0, 13555.0, 13520.0, 13380.0, 13210.0, 13380.0, 13430.0, 13295.0, 13295.0, 13345.0, 13435.0, 13345.0, 13165.0, 12825.0, 12945.0, 12645.0, 12445.0, 12230.0, 11820.0, 11515.0, 11740.0, 11650.0, 11565.0, 11440.0, 11030.0, 10935.0, 10675.0, 10630.0, 10745.0, 10630.0, 10950.0, 10840.0, 10845.0, 10890.0, 10865.0, 10730.0, 10365.0, 10280.0, 10175.0, 10230.0, 10660.0, 10650.0, 10645.0, 10590.0, 10345.0, 10265.0, 10645.0, 10575.0, 10565.0, 10205.0, 10050.0, 10225.0], "lows": [6119.76, 6274.79, 6148.47, 6263.31, 6229.81, 6204.93, 6022.15, 6061.39, 5977.18, 5955.17, 6028.85, 6033.64, 6086.27, 6066.17, 6114.98, 6114.98, 6122.63, 6201.11, 6122.64, 6028.85, 6021.2, 5978.13, 6117.85, 6091.05, 6062.35, 6011.63, 5850.86, 5879.57, 5888.18, 5870.95, 5874.78, 5957.08, 5991.53, 5989.62, 5887.22, 5822.15, 5828.85, 5864.26, 5864.25, 5877.65, 5811.62, 5873.82, 5900.62, 5918.8, 5945.6, 5966.65, 5977.18, 5971.44, 6024.07, 6037.47, 6042.25, 6063.3, 6044.16, 6025.02, 6035.55, 6041.29, 6060.43, 5981.96, 5879.57, 5839.37, 5887.22, 5918.8, 5903.49, 5931.88, 5966.77, 5908.61, 5911.52, 5867.89, 5918.3, 5983.25, 6004.58, 6061.78, 6108.31, 5968.71, 5964.84, 5918.3, 5886.31, 5870.8, 5851.41, 5833.0, 5819.42, 5924.12, 5918.3, 5942.54, 5914.43, 5928.97, 6098.62, 6129.64, 6102.49, 6170.35, 6331.28, 6630.83, 6650.22, 6730.68, 6779.15, 6720.01, 6752.97, 6700.62, 6575.57, 6589.14, 6625.98, 6644.4, 6636.64, 6588.17, 6590.11, 6601.74, 6636.64, 6578.48, 6567.81, 6569.75, 6646.34, 6582.36, 6599.81, 6702.56, 6678.33, 6603.68, 6523.22, 6532.92, 6639.55, 6738.43, 6685.11, 6704.5, 6699.66, 6731.65, 6774.3, 6864.46, 6967.22, 6919.71, 6976.91, 7067.07, 7388.91, 7601.22, 7716.58, 7784.44, 7765.05, 7677.8, 7711.73, 7873.62, 7779.59, 7796.07, 7664.23, 7688.46, 7648.72, 7734.03, 7936.63, 7925.0, 8003.52, 7974.44, 8150.88, 8040.36, 8024.85, 8120.82, 8275.93, 8410.68, 8424.25, 8618.14, 8434.92, 7842.6, 7934.7, 7967.66, 8077.2, 8167.36, 8231.34, 8106.28, 8017.1, 8120.82, 8078.17, 8028.73, 8029.7, 8041.33, 7971.53, 7869.74, 7902.71, 7925.0, 7901.74, 7889.13, 7928.88, 7964.75, 8101.44, 8078.17, 8015.16, 8038.42, 8092.71, 8095.7, 8067.14, 8056.31, 8000.18, 7626.95, 7723.46, 7510.75, 7653.54, 7675.21, 7667.33, 7555.07, 7604.3, 7465.45, 7396.52, 7400.46, 7418.19, 7269.49, 7331.53, 7355.16, 7352.21, 7253.73, 7386.67, 7534.39, 7499.92, 7455.61, 7586.58, 7211.39, 7267.52, 7566.88, 7736.26, 8007.07, 8163.65, 8252.28, 8297.57, 8245.38, 8252.28, 8218.79, 8126.23, 8072.06, 8062.22, 8043.51, 8070.1, 8020.86, 8319.24, 8351.74, 8492.56, 8610.73, 8653.07, 8541.79, 8445.29, 8431.5, 8388.17, 8218.79, 8176.45, 8226.67, 8294.62, 8384.23, 8234.55, 8346.81, 8254.25, 8363.55, 8423.62, 8420.67, 8366.51, 8498.47, 8670.8, 8685.57, 8667.84, 8653.07, 8606.79, 8544.75, 8729.88, 8877.6, 8751.55, 8657.01, 8562.47, 8413.78, 8399.01, 8335.0, 8335.0, 8299.54, 8137.06, 8093.73, 8130.17, 8169.56, 8051.38, 7874.13, 7779.59, 6420.62, 6991.78, 7129.65, 7232.07, 7464.47, 7567.87, 7642.71, 7723.46, 7779.59, 7890.87, 7910.56, 7908.59, 8099.64, 8056.31, 7947.0, 7802.24, 7787.47, 7750.05, 7741.19, 7790.42, 7759.9, 7533.4, 7541.28, 7600.37, 7414.25, 7526.51, 7372.89, 7498.94, 7436.9, 7365.99, 7377.81, 7494.01, 7544.23, 7574.76, 7495.98, 7672.25, 7856.32, 7466.62, 7596.19, 7509.16, 7614.0, 7646.64, 7819.73, 7885.01, 7734.67, 7815.77, 7766.32, 7820.72, 7766.32, 7863.25, 7924.57, 7867.2, 7904.79, 7961.17, 7890.94, 7891.93, 7926.55, 7998.75, 7995.79, 8011.61, 7838.52, 7501.24, 7645.65, 8104.59, 8043.26, 8112.5, 8202.51, 7920.62, 8010.62, 8064.03, 8053.15, 8055.13, 8065.02, 8007.65, 8036.34, 8042.27, 8025.46, 8280.64, 8348.89, 8575.39, 8646.61, 8746.5, 8846.4, 9082.79, 8943.33, 9013.56, 8862.23, 8987.84, 9005.65, 8963.11, 9002.68, 9151.04, 9144.12, 9035.32, 9031.36, 9069.93, 9064.99, 8973.01, 9069.94, 9135.22, 9155.99, 8921.57, 8979.93, 8791.01, 8806.84, 8918.61, 9140.16, 9381.5, 9372.6, 8800.9, 8803.87, 8857.28, 9013.56, 9293.47, 9432.93, 9651.52, 9614.92, 10044.19, 10014.51, 10118.37, 9940.33, 10232.11, 10177.71, 10553.57, 10612.91, 10612.91, 10632.69, 10865.13, 10805.78, 11067.89, 11191.53, 11394.29, 11216.26, 11171.75, 11186.58, 10810.73, 10964.04, 10934.37, 10840.4, 10805.79, 10870.08, 11137.13, 10123.31, 9805.82, 9530.85, 9890.88, 10063.97, 9945.28, 10143.1, 10068.91, 10360.7, 10558.51, 10573.35, 10612.91, 10914.58, 10790.95, 10695.33, 10077.34, 10162.06, 10112.22, 9776.31, 9781.3, 8933.05, 9521.14, 9143.36, 9982.64, 9750.4, 10206.92, 10256.76, 9876.99, 9899.91, 10231.84, 10182.0, 9997.6, 10291.64, 10725.24, 11054.17, 11328.28, 11462.85, 11831.65, 12125.7, 12205.44, 11981.17, 11702.07, 11467.83, 11786.8, 11657.22, 11293.4, 11293.4, 11398.06, 11432.94, 11193.72, 11084.07, 11293.4, 11647.25, 11871.52, 12045.96, 12115.73, 11796.76, 11517.67, 11657.22, 11876.51, 11756.89, 11816.7, 11846.6, 11841.62, 11477.8, 11741.94, 11577.48, 11801.75, 11886.47, 12484.53, 13077.61, 12688.87, 12444.66, 12698.84, 12843.37, 13247.06, 13336.77, 13665.71, 13371.66, 12928.1, 12962.98, 13097.55, 13037.74, 12783.57, 12708.81, 12604.15, 12604.15, 12315.08, 12429.71, 12409.78, 12788.55, 12853.34, 12723.76, 12639.03, 12928.1, 12803.5, 12738.71, 12678.9, 12649.0, 12439.68, 12489.52, 12454.63, 13207.19, 13192.24, 13341.76, 13885.0, 13934.83, 14114.25, 13875.03, 14089.33, 14263.77, 14054.45, 13720.53, 13561.05, 13680.66, 13625.84, 13481.3, 13167.32, 13237.1, 13192.24, 12967.97, 13032.76, 12943.05, 13092.56, 13107.52, 13247.06, 13695.61, 13536.13, 13695.61, 13999.62, 13620.85, 13476.32, 13047.71, 12738.71, 12653.99, 12678.9, 12793.53, 12743.69, 12705.0, 12650.0, 12740.0, 12625.0, 12555.0, 12450.0, 12735.0, 12825.0, 12585.0, 12385.0, 12120.0, 12415.0, 12125.0, 11995.0, 12730.0, 12845.0, 13060.0, 12830.0, 12840.0, 12860.0, 12870.0, 12900.0, 12650.0, 12910.0, 12900.0, 13530.0, 13945.0, 13600.0, 13370.0, 13535.0, 13570.0, 13605.0, 13380.0, 13310.0, 13110.0, 12950.0, 13125.0, 13170.0, 13025.0, 13015.0, 13135.0, 13205.0, 12975.0, 12835.0, 12580.0, 12655.0, 12385.0, 12300.0, 11860.0, 11340.0, 11100.0, 11500.0, 11460.0, 11320.0, 11100.0, 10805.0, 10640.0, 10245.0, 10335.0, 10400.0, 10475.0, 10595.0, 10630.0, 10560.0, 10530.0, 10550.0, 10275.0, 10170.0, 9991.0, 9827.0, 10050.0, 10430.0, 10440.0, 10350.0, 10415.0, 10105.0, 9950.0, 10200.0, 10255.0, 10250.0, 10065.0, 9913.0, 9971.0], "purchase_date": "2023-06-28", "cost_price": 8875, "currency": "JPY", "is_foreign": false};
const isForeign = false;
const currency = 'JPY';
const monthEnd = '2026-01-31';
const repYear = 2026;
const repMonth = 1;
let chart = null;
let period = '6m';
let showJPY = false;

function fmtJPY(v) {
    return new Intl.NumberFormat('ja-JP', {
        style:'currency', currency:'JPY',
        maximumFractionDigits:0
    }).format(v);
}
function fmtForeign(v, cur) {
    try {
        return new Intl.NumberFormat('en-US', {
            style:'currency', currency:cur,
            minimumFractionDigits:2
        }).format(v);
    } catch { return v.toLocaleString(); }
}
function fmtP(v) {
    if (showJPY) return fmtJPY(v);
    if (!isForeign || currency === 'JPY')
        return fmtJPY(v);
    return fmtForeign(v, currency);
}
function pad2(n) { return n < 10 ? '0'+n : ''+n; }

function startDateFor(p) {
    const ey = parseInt(monthEnd.slice(0,4),10);
    const em = parseInt(monthEnd.slice(5,7),10);
    switch(p) {
        case '1m':
            return monthEnd.slice(0,8) + '01';
        case '6m': {
            let sm = em - 6; let sy = ey;
            if (sm <= 0) { sm += 12; sy--; }
            return sy + '-' + pad2(sm) + '-01';
        }
        case '1y':
            return (ey-1) + '-' + pad2(em) + '-01';
        default: return '0000-00-00';
    }
}

function getSlice() {
    const sd = startDateFor(period);
    let si = 0;
    if (period !== 'all') {
        si = S.dates.findIndex(d => d >= sd);
        if (si < 0) si = 0;
    }
    const sl = (arr) => arr ? arr.slice(si) : null;
    return {
        dates: sl(S.dates),
        closes: sl(showJPY && S.closes_jpy
            ? S.closes_jpy : S.closes),
        highs: sl(showJPY && S.highs_jpy
            ? S.highs_jpy : S.highs),
        lows: sl(showJPY && S.lows_jpy
            ? S.lows_jpy : S.lows),
        cost: showJPY && S.cost_price_jpy
            ? S.cost_price_jpy : S.cost_price,
    };
}

function draw() {
    if (chart) chart.destroy();
    const s = getSlice();
    const costLine = s.dates.map(() => s.cost);
    const ctx = document.getElementById('icChart')
        .getContext('2d');
    chart = new Chart(ctx, {
        type:'line',
        data:{
            labels: s.dates,
            datasets:[
                {
                    label:'終値', data:s.closes,
                    borderColor:'#2563eb',
                    backgroundColor:
                        'rgba(37,99,235,0.08)',
                    borderWidth:2.5, tension:0,
                    fill:false,
                    pointRadius: s.dates.length > 90
                        ? 0 : 3,
                    pointHoverRadius:5,
                    pointBackgroundColor:'#2563eb'
                },
                {
                    label:'取得単価', data:costLine,
                    borderColor:'#f59e0b',
                    borderWidth:2,
                    borderDash:[6,4], tension:0,
                    fill:false,
                    pointRadius:0,
                    pointHoverRadius:0
                }
            ]
        },
        options:{
            responsive:true,
            maintainAspectRatio:false,
            plugins:{
                legend:{
                    display:true, position:'top',
                    align:'end'
                },
                tooltip:{
                    mode:'index', intersect:false,
                    callbacks:{
                        title: items =>
                            s.dates[items[0].dataIndex],
                        label: c => {
                            if (c.datasetIndex === 1)
                                return '取得単価: '
                                    + fmtP(c.parsed.y);
                            return '終値: '
                                + fmtP(c.parsed.y);
                        },
                        afterBody: items => {
                            const i = items[0].dataIndex;
                            const lines = [];
                            lines.push('高値: '
                                + fmtP(s.highs[i]));
                            lines.push('安値: '
                                + fmtP(s.lows[i]));
                            const d = s.closes[i]
                                - s.cost;
                            const r = s.cost > 0
                                ? ((d/s.cost)*100)
                                    .toFixed(1) : '0.0';
                            const sg = d>=0?'+':'';
                            lines.push('');
                            lines.push('取得比: '
                                + sg + r + '%');
                            return lines;
                        }
                    }
                }
            },
            scales:{
                x:{
                    ticks:{
                        autoSkip: false,
                        maxRotation: 45,
                        callback: function(val, idx) {
                            const d = s.dates[idx];
                            if (!d) return null;
                            const n = s.dates.length;
                            const p = d.split('-');
                            const y = p[0];
                            const m = parseInt(p[1],10);
                            const day = p[2]
                                ? '/'+parseInt(p[2],10)
                                : '';
                            const full = y+'/'+m+day;
                            const sh = m + day;
                            if (idx === 0
                                || idx === n - 1)
                                return full;
                            if (idx > 0) {
                                const pv =
                                    s.dates[idx-1];
                                if (pv && pv.split(
                                    '-')[0] !== y)
                                    return full;
                            }
                            const step = Math.max(
                                1,
                                Math.floor(n / 10));
                            if (idx % step === 0
                                && (n - idx) > step/2)
                                return sh;
                            return null;
                        }
                    }
                },
                y:{
                    beginAtZero:false,
                    ticks:{ callback: v => fmtP(v) }
                }
            },
            interaction:{
                mode:'nearest', axis:'x',
                intersect:false
            }
        }
    });
    // 情報パネル
    const lc = s.closes[s.closes.length-1];
    const cp = s.cost;
    const df = lc - cp;
    const rt = cp > 0
        ? ((df/cp)*100).toFixed(2) : '0.00';
    const cl = df >= 0 ? 'positive' : 'negative';
    const sg = df >= 0 ? '+' : '';
    const ph = Math.max(...s.highs);
    const pl2 = Math.min(...s.lows);
    let hlLbl;
    if (period === '1m')
        hlLbl = repYear+'年'+repMonth+'月 高値/安値';
    else if (period === '6m')
        hlLbl = '過去6ヶ月 高値/安値';
    else if (period === '1y')
        hlLbl = '過去1年 高値/安値';
    else hlLbl = '全期間 高値/安値';
    document.getElementById('icInfo').innerHTML = `
        <div class="ic-info-item">
            <span class="ic-info-label">取得単価</span>
            <span class="ic-info-value">
                ${fmtP(cp)}</span></div>
        <div class="ic-info-item">
            <span class="ic-info-label">月末終値</span>
            <span class="ic-info-value">
                ${fmtP(lc)}</span></div>
        <div class="ic-info-item">
            <span class="ic-info-label">取得比</span>
            <span class="ic-info-value ${cl}">
                ${sg}${rt}%</span></div>
        <div class="ic-info-item">
            <span class="ic-info-label">${hlLbl}</span>
            <span class="ic-info-value">
                ${fmtP(ph)} / ${fmtP(pl2)}</span>
        </div>`;
}

// 期間切替
document.querySelectorAll('#periodTabs button')
    .forEach(b => {
    b.onclick = () => {
        document.querySelectorAll('#periodTabs button')
            .forEach(x => x.classList.remove('active'));
        b.classList.add('active');
        period = b.dataset.period;
        draw();
    };
});

// 外貨/円切替
const fxEl = document.getElementById('fxToggle');
if (fxEl) {
    fxEl.querySelectorAll('button').forEach(b => {
        b.onclick = () => {
            fxEl.querySelectorAll('button')
                .forEach(x =>
                    x.classList.remove('active'));
            b.classList.add('active');
            showJPY = b.dataset.fx === 'jpy';
            draw();
        };
    });
}

draw();
})();
</script>